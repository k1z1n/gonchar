# Инструкция по настройке характеристик товаров

## Шаг 1: Создание таблицы

Выполните SQL скрипт для создания таблицы `product_characteristics`:

```sql
-- Откройте файл: database/create_product_characteristics_table.sql
-- Или выполните SQL запрос в phpMyAdmin или консоли MySQL
```

Этот скрипт создаст таблицу для хранения значений характеристик товаров.

## Шаг 2: Наполнение таблицы characteristics

Для каждой категории товаров нужно добавить шаблоны характеристик в таблицу `characteristics`.

### Пример для категории "Кружки" (category_id = 1):

```sql
INSERT INTO characteristics (name, content, category_id) VALUES
('Объем', 'Укажите объем кружки в мл (например, 250 мл)', 1),
('Материал', 'Материал изготовления (например, керамика, фарфор)', 1),
('Ручка', 'Наличие ручки (Да/Нет)', 1);
```

### Пример для категории "Вазы" (category_id = 2):

```sql
INSERT INTO characteristics (name, content, category_id) VALUES
('Высота', 'Высота вазы в см (например, 30 см)', 2),
('Диаметр', 'Диаметр вазы в см (например, 10 см)', 2),
('Материал', 'Материал изготовления (например, глина, керамика)', 2);
```

### Пример для категории "Тарелки" (category_id = 3):

```sql
INSERT INTO characteristics (name, content, category_id) VALUES
('Диаметр', 'Диаметр тарелки в см (например, 25 см)', 3),
('Глубина', 'Глубина тарелки в см (например, 3 см)', 3),
('Материал', 'Материал изготовления', 3);
```

## Шаг 3: Проверка работы

1. Откройте страницу добавления товара: `?page=admin_add_product`
2. Выберите категорию - должны появиться поля для характеристик этой категории
3. Заполните все поля и сохраните товар
4. Проверьте в БД, что данные сохранились в таблице `product_characteristics`

## Как это работает

### Структура базы данных:

```
category (категории)
    ↓
characteristics (ШАБЛОНЫ характеристик)
    ↓
products (товары)
    ↓
product_characteristics (ЗНАЧЕНИЯ характеристик для конкретных товаров)
```

### Процесс добавления товара:

1. **Выбор категории** → JavaScript отправляет Ajax запрос
2. **Загрузка шаблонов** → Сервер возвращает список характеристик для выбранной категории
3. **Отображение полей** → JavaScript создает поля для каждой характеристики
4. **Заполнение** → Пользователь заполняет значения
5. **Сохранение** → При отправке формы данные сохраняются в:
   - `products` - основной товар
   - `product_characteristics` - значения характеристик

## Получение характеристик товара

Чтобы получить характеристики конкретного товара:

```sql
SELECT 
    c.name,
    pc.value
FROM product_characteristics pc
JOIN characteristics c ON pc.characteristic_id = c.id
WHERE pc.product_id = 1;
```

## Редактирование характеристик категории

Чтобы изменить шаблоны характеристик для категории:

```sql
-- Посмотреть текущие шаблоны
SELECT * FROM characteristics WHERE category_id = 1;

-- Обновить шаблон
UPDATE characteristics 
SET name = 'Новое название', 
    content = 'Новое описание' 
WHERE id = 1;

-- Добавить новый шаблон
INSERT INTO characteristics (name, content, category_id) 
VALUES ('Новая характеристика', 'Описание', 1);

-- Удалить шаблон
DELETE FROM characteristics WHERE id = 1;
```

## Важно

- При удалении товара (`DELETE FROM products`) все его характеристики автоматически удалятся (ON DELETE CASCADE)
- При удалении категории нужно решить, что делать с ее характеристиками
- При изменении характеристик категории существующие товары НЕ изменятся автоматически




